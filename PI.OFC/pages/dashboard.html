<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Protegido</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#1E40AF',
                        dark: '#1F2937',
                        light: '#F9FAFB'
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        .password-strength {
            height: 4px;
            transition: all 0.3s ease;
        }
        .shake {
            animation: shake 0.5s;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
    </style>
</head>
<body>
    <!-- Página de Login -->
    <div id="loginPage" class="min-h-screen flex items-center justify-center bg-gray-100">
        <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-md">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-800 mb-2">Acesso Restrito</h1>
                <p class="text-gray-600">Informe suas credenciais para acessar o dashboard</p>
            </div>
            
            <form id="loginForm" class="space-y-6">
                <div>
                    <label for="username" class="block text-sm font-medium text-gray-700 mb-1">Usuário</label>
                    <input type="text" id="username" required 
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary transition">
                </div>
                
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Senha</label>
                    <input type="password" id="password" required 
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary transition">
                    <div class="flex mt-1 space-x-1">
                        <div id="strength1" class="password-strength w-1/4 bg-gray-200 rounded-sm"></div>
                        <div id="strength2" class="password-strength w-1/4 bg-gray-200 rounded-sm"></div>
                        <div id="strength3" class="password-strength w-1/4 bg-gray-200 rounded-sm"></div>
                        <div id="strength4" class="password-strength w-1/4 bg-gray-200 rounded-sm"></div>
                    </div>
                </div>
                
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <input id="remember" type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                        <label for="remember" class="ml-2 block text-sm text-gray-700">Lembrar acesso</label>
                    </div>
                    <a href="#" class="text-sm text-primary hover:underline">Esqueceu a senha?</a>
                </div>
                
                <div>
                    <button type="submit" 
                        class="w-full bg-primary hover:bg-secondary text-white py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition">
                        Entrar
                    </button>
                </div>
            </form>
            
            <div id="loginError" class="mt-4 hidden p-3 bg-red-50 text-red-700 rounded-md text-sm"></div>
        </div>
    </div>

    <!-- Dashboard (inicialmente oculto) -->
    <div id="dashboardPage" class="hidden min-h-screen bg-gray-50">
        <header class="bg-white shadow-sm">
            <div class="max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8 flex justify-between items-center">
                <h1 class="text-xl font-semibold text-gray-900">Dashboard Analytics</h1>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <button id="userMenuButton" class="flex items-center space-x-2 focus:outline-none">
                            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/8b174e9a-6b9a-4655-96c2-93d17ca2f01e.png" alt="Ícone de usuário com avatar padrão" class="rounded-full">
                            <span id="loggedInUser" class="text-sm font-medium"></span>
                        </button>
                        <div id="userMenu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Perfil</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Configurações</a>
                            <a href="#" id="logoutButton" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Sair</a>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main class="max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                <div class="bg-white overflow-hidden shadow rounded-lg">
                    <div class="px-4 py-5 sm:p-6">
                        <dt class="text-sm font-medium text-gray-500 truncate">Total de Usuários</dt>
                        <dd class="mt-1 text-3xl font-semibold text-gray-900" id="totalUsers">0</dd>
                    </div>
                </div>
                <div class="bg-white overflow-hidden shadow rounded-lg">
                    <div class="px-4 py-5 sm:p-6">
                        <dt class="text-sm font-medium text-gray-500 truncate">Visitas Hoje</dt>
                        <dd class="mt-1 text-3xl font-semibold text-gray-900" id="todayVisits">0</dd>
                    </div>
                </div>
                <div class="bg-white overflow-hidden shadow rounded-lg">
                    <div class="px-4 py-5 sm:p-6">
                        <dt class="text-sm font-medium text-gray-500 truncate">Conversão</dt>
                        <dd class="mt-1 text-3xl font-semibold text-gray-900" id="conversionRate">0%</dd>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                <div class="lg:col-span-2 bg-white shadow rounded-lg p-4">
                    <h2 class="text-lg font-medium text-gray-900 mb-4">Tráfego Mensal</h2>
                    <canvas id="trafficChart" height="250"></canvas>
                </div>
                <div class="bg-white shadow rounded-lg p-4">
                    <h2 class="text-lg font-medium text-gray-900 mb-4">Dispositivos</h2>
                    <canvas id="devicesChart" height="250"></canvas>
                </div>
            </div>

            <div class="bg-white shadow rounded-lg overflow-hidden">
                <div class="px-4 py-5 sm:px-6 border-b border-gray-200">
                    <h3 class="text-lg leading-6 font-medium text-gray-900">Últimas Atividades</h3>
                </div>
                <div class="divide-y divide-gray-200">
                    <div class="px-4 py-4 sm:px-6">
                        <div class="flex items-center">
                            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/26d55812-3617-4146-9e01-b7aecd13cbc8.png" alt="Avatar do usuário 1" class="w-10 h-10 rounded-full">
                            <div class="ml-3">
                                <p class="text-sm font-medium text-gray-900">Novo usuário registrado</p>
                                <p class="text-sm text-gray-500">João Silva - há 5 minutos</p>
                            </div>
                        </div>
                    </div>
                    <div class="px-4 py-4 sm:px-6">
                        <div class="flex items-center">
                            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/d1526b20-c0d5-4422-90c3-837e0483d908.png" alt="Avatar do usuário 2" class="w-10 h-10 rounded-full">
                            <div class="ml-3">
                                <p class="text-sm font-medium text-gray-900">Atualização de dados</p>
                                <p class="text-sm text-gray-500">Maria Souza - há 1 hora</p>
                            </div>
                        </div>
                    </div>
                    <div class="px-4 py-4 sm:px-6">
                        <div class="flex items-center">
                            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/25c7ac9b-1596-45d9-8161-bc738377f464.png" alt="Avatar do usuário 3" class="w-10 h-10 rounded-full">
                            <div class="ml-3">
                                <p class="text-sm font-medium text-gray-900">Novo pedido realizado</p>
                                <p class="text-sm text-gray-500">Carlos Oliveira - há 2 horas</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Simulação de banco de dados
        function initializeDB() {
            if (!localStorage.getItem('users')) {
                // Senha codificada (em produção usar bcrypt)
                localStorage.setItem('users', JSON.stringify([
                    { username: 'admin', password: 'admin123' }
                ]));
            }
            
            if (!localStorage.getItem('dashboardData')) {
                localStorage.setItem('dashboardData', JSON.stringify({
                    totalUsers: 1248,
                    todayVisits: 345,
                    conversionRate: '32%',
                    trafficData: [120, 190, 230, 180, 290, 390, 450, 520, 600, 550, 620, 700],
                    devicesData: {
                        desktop: 55,
                        mobile: 30,
                        tablet: 15
                    }
                }));
            }
            
            return {
                users: JSON.parse(localStorage.getItem('users')),
                dashboardData: JSON.parse(localStorage.getItem('dashboardData'))
            };
        }

        const db = initializeDB();

        // DOM Elements
        const loginPage = document.getElementById('loginPage');
        const dashboardPage = document.getElementById('dashboardPage');
        const loginForm = document.getElementById('loginForm');
        const loginError = document.getElementById('loginError');
        const logoutButton = document.getElementById('logoutButton');
        const userMenuButton = document.getElementById('userMenuButton');
        const userMenu = document.getElementById('userMenu');
        const loggedInUser = document.getElementById('loggedInUser');

        // Event Listeners
        loginForm.addEventListener('submit', handleLogin);
        logoutButton.addEventListener('click', handleLogout);
        userMenuButton.addEventListener('click', toggleUserMenu);
        
        // Monitorar força da senha
        document.getElementById('password').addEventListener('input', checkPasswordStrength);
        
        // Verificar se já está logado
        if (localStorage.getItem('loggedInUser')) {
            showDashboard(localStorage.getItem('loggedInUser'));
        }

        // Funções
        function handleLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // Simples validação (em produção usar algoritmo seguro como bcrypt)
            const user = db.users.find(u => u.username === username && u.password === password);
            
            if (user) {
                loginError.classList.add('hidden');
                localStorage.setItem('loggedInUser', username);
                showDashboard(username);
                
                if (document.getElementById('remember').checked) {
                    localStorage.setItem('rememberedUser', username);
                }
            } else {
                loginError.textContent = 'Usuário ou senha incorretos. Tente novamente.';
                loginError.classList.remove('hidden');
                loginForm.classList.add('shake');
                setTimeout(() => loginForm.classList.remove('shake'), 500);
            }
        }
        
        function checkPasswordStrength() {
            const password = document.getElementById('password').value;
            const strength1 = document.getElementById('strength1');
            const strength2 = document.getElementById('strength2');
            const strength3 = document.getElementById('strength3');
            const strength4 = document.getElementById('strength4');
            
            // Reset
            strength1.style.backgroundColor = '#E5E7EB';
            strength2.style.backgroundColor = '#E5E7EB';
            strength3.style.backgroundColor = '#E5E7EB';
            strength4.style.backgroundColor = '#E5E7EB';
            
            if (password.length === 0) return;
            
            if (password.length >= 1) {
                strength1.style.backgroundColor = '#EF4444';
            }
            
            if (password.length >= 6) {
                strength1.style.backgroundColor = '#F59E0B';
                strength2.style.backgroundColor = '#F59E0B';
            }
            
            if (password.length >= 8 && /[A-Z]/.test(password) && /[0-9]/.test(password)) {
                strength1.style.backgroundColor = '#10B981';
                strength2.style.backgroundColor = '#10B981';
                strength3.style.backgroundColor = '#10B981';
            }
            
            if (password.length >= 10 && /[A-Z]/.test(password) && /[0-9]/.test(password) && /[^A-Za-z0-9]/.test(password)) {
                strength1.style.backgroundColor = '#3B82F6';
                strength2.style.backgroundColor = '#3B82F6';
                strength3.style.backgroundColor = '#3B82F6';
                strength4.style.backgroundColor = '#3B82F6';
            }
        }
        
        function showDashboard(username) {
            loginPage.classList.add('hidden');
            dashboardPage.classList.remove('hidden');
            loggedInUser.textContent = username;
            
            // Carregar dados do dashboard
            document.getElementById('totalUsers').textContent = db.dashboardData.totalUsers.toLocaleString();
            document.getElementById('todayVisits').textContent = db.dashboardData.todayVisits.toLocaleString();
            document.getElementById('conversionRate').textContent = db.dashboardData.conversionRate;
            
            // Configurar gráficos
            setupCharts();
        }
        
        function setupCharts() {
            // Gráfico de tráfego
            const trafficCtx = document.getElementById('trafficChart').getContext('2d');
            new Chart(trafficCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
                    datasets: [{
                        label: 'Visitantes',
                        data: db.dashboardData.trafficData,
                        borderColor: '#3B82F6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // Gráfico de dispositivos
            const devicesCtx = document.getElementById('devicesChart').getContext('2d');
            new Chart(devicesCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Desktop', 'Mobile', 'Tablet'],
                    datasets: [{
                        data: [
                            db.dashboardData.devicesData.desktop, 
                            db.dashboardData.devicesData.mobile, 
                            db.dashboardData.devicesData.tablet
                        ],
                        backgroundColor: [
                            '#3B82F6',
                            '#10B981',
                            '#F59E0B'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    },
                    cutout: '70%'
                }
            });
        }
        
        function handleLogout() {
            localStorage.removeItem('loggedInUser');
            loginPage.classList.remove('hidden');
            dashboardPage.classList.add('hidden');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }
        
        function toggleUserMenu() {
            userMenu.classList.toggle('hidden');
        }
        
        // Fechar menu ao clicar fora
        document.addEventListener('click', (e) => {
            if (!userMenuButton.contains(e.target) && !userMenu.contains(e.target)) {
                userMenu.classList.add('hidden');
            }
        });
    </script>
</body>
</html>

